---
alwaysApply: true
---

# üåç Data Fetching, i18n & Accessibility

## Data Fetching
- All API via `src/lib/http/client.ts`
- Base URL: `process.env.NEXT_PUBLIC_API_BASE_URL`
- **TanStack Query** for all client-side data fetching
- **HTTP Interceptors** for token management and error handling
- **Rate limiting** with event bus system
- Public-safe RSC only:
```ts
fetch(url, { next: { revalidate: 60, tags: ['posts'] } })
```
- Client hooks: `useQuery()` and `useMutation()` from TanStack Query
- **Query Configuration**: 5min staleTime, 10min gcTime, 3 retries with exponential backoff
- **Provider Setup**: `ReactQueryProvider` with devtools in development
- **Query Keys**: Structured keys like `["article", articleId]`, `["settings", userId]`
- **Error Handling**: Automatic retry with toast notifications via Sonner

## Forms & Validation
- `react-hook-form` + `zod` + shadcn `<Form />` primitives (`components/ui/layout/form.tsx`)
- Disable submit while pending
- Show `FormMessage` for errors
- **Toast notifications** with Sonner for feedback
- Respect mobile ergonomics (spacing, label click area)

## i18n
- All text in `src/i18n/locales/{en,vi}/*.json`
- **9 namespaces**: `auth`, `article`, `common`, `demo`, `home`, `profile`, `toast`, `user`, `write`
- Use `useTranslations('namespace')`
- **Language switching** with dynamic locale switching

## Accessibility
- AA contrast in both themes
- Keyboard nav (Tab, ESC)
- `aria-live="polite"` for async feedback
- `VisuallyHidden` for non-visual labels
- **Focus management** in dialogs and modals
- **Screen reader** friendly components
