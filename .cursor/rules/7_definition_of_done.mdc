---
alwaysApply: true
---

# ✅ Definition of Done (DoD)

## Checklist before marking task as complete:

### MCP Tools Usage (MANDATORY)
- ✅ Checked MCP tools for existing solutions before creating new code
- ✅ Used shadcn MCP for UI components when applicable
- ✅ Used Next.js MCP for documentation and diagnostics
- ✅ Used GitHub MCP for repository operations
- ✅ No duplicate implementations of MCP-available functionality

### Code Quality
- ✅ No TS/ESLint warnings
- ✅ No console errors or warnings
- ✅ Code follows project structure and naming conventions
- ✅ Components ≤ 200 lines, files ≤ 300 lines

### Theming & UI
- ✅ Theme works in both dark/light modes using shadcn tokens
- ✅ AA contrast minimum in both themes
- ✅ Uses shadcn primitives with proper loading/disabled/error states
- ✅ No hardcoded colors - uses theme tokens

### Responsive Design
- ✅ Mobile-first responsive layout
- ✅ Scales properly at `sm`/`md`/`lg`/`xl`/`2xl` breakpoints
- ✅ Touch targets ≥ 48px on mobile
- ✅ Tested on mobile, tablet, and desktop viewports

### Internationalization
- ✅ No hard-coded text in components
- ✅ i18n keys present for both EN & VI
- ✅ Uses `useTranslations()` or `useI18n()` hooks
- ✅ All user-facing text properly translated

### Accessibility
- ✅ Proper semantic HTML and ARIA labels
- ✅ Keyboard navigation works (Tab, ESC, Enter)
- ✅ Focus ring visible on interactive elements
- ✅ Screen reader friendly
- ✅ `aria-live` for async feedback

### Architecture
- ✅ No Server Actions (`"use server"`) or `app/api/*`
- ✅ No secrets in client code
- ✅ Only `NEXT_PUBLIC_*` environment variables
- ✅ All network calls through `src/lib/http/client.ts`

### Data & State
- ✅ Uses TanStack Query for server state
- ✅ Uses Jotai for client state when needed
- ✅ Proper loading states implemented
- ✅ Error boundaries and user feedback via toast

### Forms (if applicable)
- ✅ Form validation with Zod
- ✅ Uses `react-hook-form` + shadcn Form components
- ✅ Submit button disabled while pending
- ✅ Clear error messages shown to users

### Animation & Loading (if applicable)
- ✅ Animation components used (AnimatedSection/Grid/Header)
- ✅ Skeletonize with placeholder divs
- ✅ Loading and data props passed to animation components
- ✅ No animation conflicts with skeleton

### Testing
- ✅ Tests for critical flows + theme toggle
- ✅ Coverage ≥ 80% (if adding new functionality)
- ✅ Tests pass: `yarn test`

### Performance
- ✅ Images use `next/image` with proper `sizes` attribute
- ✅ Heavy components use dynamic imports when needed
- ✅ No unnecessary re-renders

### Final Checks
- ✅ Linting passes: `yarn lint`
- ✅ Formatting applied: `yarn format`
- ✅ Build succeeds: `yarn build`
- ✅ App runs without errors: `yarn dev`
