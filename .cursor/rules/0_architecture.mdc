---
alwaysApply: true
---

# ðŸ§© Architecture & Environment Rules

## Project Structure
```
src/
â”œâ”€â”€ app/ (App Router pages)
â”‚   â”œâ”€â”€ auth/ (login, register)
â”‚   â”œâ”€â”€ article/ (article viewing)
â”‚   â”œâ”€â”€ user/ (user profiles)
â”‚   â”œâ”€â”€ write/ (article writing)
â”‚   â””â”€â”€ theme-*/ (theme testing pages)
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ ui/ (shadcn primitives + custom)
â”‚   â”‚   â”œâ”€â”€ core/ (basic components)
â”‚   â”‚   â”œâ”€â”€ layout/ (dialogs, forms)
â”‚   â”‚   â”œâ”€â”€ navigation/ (nav components)
â”‚   â”‚   â”œâ”€â”€ theme/ (theme components)
â”‚   â”‚   â”œâ”€â”€ utilities/ (utility components)
â”‚   â”‚   â””â”€â”€ dracula/ (dracula variants)
â”‚   â”œâ”€â”€ features/ (business logic)
â”‚   â”‚   â”œâ”€â”€ auth/ (auth components)
â”‚   â”‚   â”œâ”€â”€ navigation/ (site nav)
â”‚   â”‚   â”œâ”€â”€ reactions/ (like/reaction)
â”‚   â”‚   â””â”€â”€ text-editor/ (TipTap editor)
â”‚   â”œâ”€â”€ providers/ (context providers)
â”‚   â””â”€â”€ shared/ (skeletons, utilities, animations)
â”œâ”€â”€ hooks/ (custom React hooks)
â”‚   â”œâ”€â”€ auth/ (auth hooks)
â”‚   â”œâ”€â”€ article/ (article hooks)
â”‚   â”œâ”€â”€ content/ (content rendering)
â”‚   â”œâ”€â”€ media/ (media handling)
â”‚   â”œâ”€â”€ reactions/ (reaction hooks)
â”‚   â””â”€â”€ ui/ (UI hooks)
â”‚       â”œâ”€â”€ use-page-metadata.ts (page metadata & SEO)
â”‚       â””â”€â”€ useBreadcrumb.ts (breadcrumb navigation)
â”œâ”€â”€ i18n/ (internationalization)
â”œâ”€â”€ lib/ (utilities, API, stores)
â”‚   â”œâ”€â”€ api/ (API wrappers)
â”‚   â”œâ”€â”€ auth/ (Firebase config)
â”‚   â”œâ”€â”€ constants/ (app constants)
â”‚   â”œâ”€â”€ http/ (HTTP client + interceptors)
â”‚   â”œâ”€â”€ interface/ (TypeScript interfaces)
â”‚   â”œâ”€â”€ rate-limit/ (rate limiting)
â”‚   â”œâ”€â”€ types/ (TypeScript types)
â”‚   â”œâ”€â”€ utils/ (utility functions)
â”‚   â”‚   â””â”€â”€ breadcrumb.ts (breadcrumb generation utilities)
â”‚   â””â”€â”€ validators/ (Zod schemas)
â””â”€â”€ __tests__/ (Jest + RTL tests)
```

> **FE-only rules**
> - âŒ No `"use server"`, `app/api/*`, or secrets
> - âœ… Only `NEXT_PUBLIC_*` envs  
> - âœ… Network via `src/lib/http/client.ts`

## Core Stack
Next.js 15+, React 19, TypeScript 5, TailwindCSS 4, shadcn/ui, Jotai, Zod, RHF, next-intl, Jest, ESLint, Prettier, TipTap, Firebase Auth, Axios, Sonner, Mermaid, TanStack Query, framer-motion.

## Yarn scripts
```bash
yarn dev / build / start / lint / format / test
yarn dlx shadcn add button card input
```
Always commit `yarn.lock`.

## Environment & Tooling
- Next.js 15+ (App Router), TypeScript strict
- Yarn v3+/Berry (no npm/pnpm)
- shadcn/ui + TailwindCSS
- Jest + @testing-library/react
- ESLint + Prettier
- i18n via `src/i18n/config.ts`
